#!/usr/bin/make -f

pname:=hw-management

KVERSION ?= $(shell uname -r)
K_SRC ?= "/lib/modules/$(KVERSION)/build"

pwd=$(shell pwd)

%:
	dh $@

override_dh_auto_configure:

override_dh_auto_build:

override_dh_auto_install:
	dh_installdirs -p$(pname) var/run/thermal
	dh_installdirs -p$(pname) var/run/thermal_zone
	dh_installdirs -p$(pname) var/run/environment
	dh_installdirs -p$(pname) var/run/power
	dh_installdirs -p$(pname) var/run/fan
	dh_installdirs -p$(pname) var/run/eeprom
	dh_installdirs -p$(pname) var/run/led
	dh_installdirs -p$(pname) var/run/qsfp
	dh_installdirs -p$(pname) var/run/module
	dh_installdirs -p$(pname) var/run/system
	dh_installdirs -p$(pname) var/run/cpld
	dh_installdirs -p$(pname) etc/mlnx
	cp usr/etc/mlnx/* debian/$(pname)/etc/mlnx
	dh_installdirs -p$(pname) etc/modprobe.d
	cp usr/etc/modprobe.d/* debian/$(pname)/etc/modprobe.d
	dh_installdirs -p$(pname) usr/sbin
	cp usr/usr/sbin/* debian/$(pname)/usr/sbin
	dh_installdirs -p$(pname) usr/bin
	cp usr/usr/bin/* debian/$(pname)/usr/bin
	dh_installdirs -p$(pname) lib/udev/rules.d/
	cp usr/lib/udev/rules.d/* debian/$(pname)/lib/udev/rules.d/
	dh_installdirs -p$(pname) lib/systemd/system/
	cp usr/lib/systemd/system/* debian/$(pname)/lib/systemd/system/
