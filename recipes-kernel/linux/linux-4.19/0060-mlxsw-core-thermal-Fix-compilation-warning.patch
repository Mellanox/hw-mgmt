From 9bef93e20ad5de9821d609018fdf91bb427e5838 Mon Sep 17 00:00:00 2001
From: Vadim Pasternak <vadimp@nvidia.com>
Date: Sun, 24 Jan 2021 11:56:56 +0200
Subject: [PATCH backport 4.19 1/3] mlxsw: core: thermal: Fix compilation
 warning

Signed-off-by: Vadim Pasternak <vadimp@nvidia.com>
---
 drivers/net/ethernet/mellanox/mlxsw/core_thermal.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/drivers/net/ethernet/mellanox/mlxsw/core_thermal.c b/drivers/net/ethernet/mellanox/mlxsw/core_thermal.c
index 57204bb2e..2140e4bf3 100644
--- a/drivers/net/ethernet/mellanox/mlxsw/core_thermal.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/core_thermal.c
@@ -934,7 +934,6 @@ static int
 mlxsw_thermal_gearbox_tz_init(struct mlxsw_thermal_module *gearbox_tz)
 {
 	char tz_name[MLXSW_THERMAL_ZONE_MAX_NAME];
-	int ret;
 
 	if (gearbox_tz->slot_index)
 		snprintf(tz_name, sizeof(tz_name), "mlxsw-lc%d-gearbox%d",
@@ -1167,8 +1166,6 @@ int mlxsw_thermal_init(struct mlxsw_core *core,
 	*p_thermal = thermal;
 	return 0;
 
-err_thermal_zone_device_enable:
-	mlxsw_thermal_gearboxes_fini(thermal, thermal->main);
 err_thermal_gearboxes_init:
 	mlxsw_thermal_gearboxes_main_fini(thermal->main);
 err_thermal_gearboxes_main_init:
-- 
2.11.0

