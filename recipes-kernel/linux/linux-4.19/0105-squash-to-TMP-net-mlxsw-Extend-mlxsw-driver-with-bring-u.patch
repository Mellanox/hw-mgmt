From 8a091584bebf31c97b530dc12bae9ce35e24d2c7 Mon Sep 17 00:00:00 2001
From: Vadim Pasternak <vadimp@nvidia.com>
Date: Wed, 23 Jun 2021 17:23:06 +0000
Subject: [PATCH backport/bringup 4.19 2/2] squash to: net: mlxsw: Extend mlxsw
 driver with bring-up fixes

Signed-off-by: Vadim Pasternak <vadimp@nvidia.com>
---
 drivers/net/ethernet/mellanox/mlxsw/core_env.c   | 2 +-
 drivers/net/ethernet/mellanox/mlxsw/core_hwmon.c | 8 ++------
 2 files changed, 3 insertions(+), 7 deletions(-)

diff --git a/drivers/net/ethernet/mellanox/mlxsw/core_env.c b/drivers/net/ethernet/mellanox/mlxsw/core_env.c
index 39111620f..faae6fe3c 100644
--- a/drivers/net/ethernet/mellanox/mlxsw/core_env.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/core_env.c
@@ -348,7 +348,7 @@ int mlxsw_env_sensor_map_create(struct mlxsw_core *core,
 			map->sensor_bit_map[i++] = bit;
 	}
 
- 	return 0;
+	return 0;
 }
 EXPORT_SYMBOL(mlxsw_env_sensor_map_create);
 
diff --git a/drivers/net/ethernet/mellanox/mlxsw/core_hwmon.c b/drivers/net/ethernet/mellanox/mlxsw/core_hwmon.c
index 04ab383ca..73c753050 100644
--- a/drivers/net/ethernet/mellanox/mlxsw/core_hwmon.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/core_hwmon.c
@@ -373,12 +373,8 @@ mlxsw_hwmon_module_temp_label_show(struct device *dev,
 	struct mlxsw_hwmon_dev *mlxsw_hwmon_dev;
 
 	mlxsw_hwmon_dev = mlxsw_hwmon_attr->mlxsw_hwmon_dev;
-	if (strlen(mlxsw_hwmon_dev->name))
-		return sprintf(buf, "%s front panel %03u\n", mlxsw_hwmon_dev->name,
-			       mlxsw_hwmon_attr->type_index);
-	else
-		return sprintf(buf, "front panel %03u\n",
-			       mlxsw_hwmon_attr->type_index);
+
+	return sprintf(buf, "front panel %03u\n", mlxsw_hwmon_attr->type_index);
 }
 
 static ssize_t
-- 
2.20.1

